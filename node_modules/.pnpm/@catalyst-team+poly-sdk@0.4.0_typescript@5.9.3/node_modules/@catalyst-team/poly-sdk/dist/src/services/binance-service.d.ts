/**
 * Binance Service
 *
 * Provides BTC/ETH/SOL K-line data from Binance public API.
 * Used for:
 * - Token vs underlying price correlation analysis
 * - Price prediction for UP/DOWN markets
 * - Backtesting strategies
 *
 * API Reference: https://binance-docs.github.io/apidocs/spot/en/#kline-candlestick-data
 */
import { RateLimiter } from '../core/rate-limiter.js';
import type { UnifiedCache } from '../core/unified-cache.js';
/**
 * Binance K-Line (OHLCV) data
 */
export interface BinanceKLine {
    /** Open time (Unix ms) */
    timestamp: number;
    /** Open price */
    open: number;
    /** High price */
    high: number;
    /** Low price */
    low: number;
    /** Close price */
    close: number;
    /** Base asset volume */
    volume: number;
    /** Close time (Unix ms) */
    closeTime: number;
    /** Quote asset volume */
    quoteVolume: number;
    /** Number of trades */
    trades: number;
}
/**
 * Supported Binance trading pairs
 */
export type BinanceSymbol = 'BTCUSDT' | 'ETHUSDT' | 'SOLUSDT';
/**
 * Supported K-line intervals
 */
export type BinanceInterval = '1m' | '5m' | '15m' | '30m' | '1h' | '4h' | '1d';
/**
 * Options for getKLines
 */
export interface BinanceKLineOptions {
    /** Start time (Unix ms) */
    startTime?: number;
    /** End time (Unix ms) */
    endTime?: number;
    /** Number of candles (default 500, max 1000) */
    limit?: number;
}
export declare class BinanceService {
    private rateLimiter;
    private cache;
    constructor(rateLimiter: RateLimiter, cache: UnifiedCache);
    /**
     * Get K-lines (candlestick data) for a symbol
     *
     * @param symbol - Trading pair (BTCUSDT, ETHUSDT, SOLUSDT)
     * @param interval - K-line interval
     * @param options - Optional parameters
     * @returns Array of K-line candles
     *
     * @example
     * ```typescript
     * const klines = await binanceService.getKLines('BTCUSDT', '1h', { limit: 100 });
     * console.log(`Latest close: ${klines[klines.length - 1].close}`);
     * ```
     */
    getKLines(symbol: BinanceSymbol, interval: BinanceInterval, options?: BinanceKLineOptions): Promise<BinanceKLine[]>;
    /**
     * Get current price for a symbol
     *
     * @param symbol - Trading pair (BTCUSDT, ETHUSDT, SOLUSDT)
     * @returns Current price
     *
     * @example
     * ```typescript
     * const price = await binanceService.getPrice('BTCUSDT');
     * console.log(`BTC price: $${price}`);
     * ```
     */
    getPrice(symbol: BinanceSymbol): Promise<number>;
    /**
     * Get price at a specific timestamp (nearest candle close)
     *
     * Uses the 1-minute candle that contains the timestamp and returns
     * the close price of that candle.
     *
     * @param symbol - Trading pair (BTCUSDT, ETHUSDT, SOLUSDT)
     * @param timestamp - Unix timestamp in milliseconds
     * @returns Price at the given timestamp
     *
     * @example
     * ```typescript
     * // Get BTC price 1 hour ago
     * const oneHourAgo = Date.now() - 60 * 60 * 1000;
     * const price = await binanceService.getPriceAt('BTCUSDT', oneHourAgo);
     * ```
     */
    getPriceAt(symbol: BinanceSymbol, timestamp: number): Promise<number>;
    /**
     * Get multiple prices at once
     *
     * @param symbols - Array of trading pairs
     * @returns Map of symbol to price
     */
    getPrices(symbols: BinanceSymbol[]): Promise<Map<BinanceSymbol, number>>;
    /**
     * Get price change over a time period
     *
     * @param symbol - Trading pair
     * @param startTime - Start time (Unix ms)
     * @param endTime - End time (Unix ms, defaults to now)
     * @returns Price change percentage
     */
    getPriceChange(symbol: BinanceSymbol, startTime: number, endTime?: number): Promise<{
        startPrice: number;
        endPrice: number;
        changePercent: number;
    }>;
    private validateSymbol;
    private validateInterval;
    private buildKLineCacheKey;
    private buildKLinesUrl;
    /**
     * Parse Binance K-line array response
     *
     * Binance returns K-lines as arrays:
     * [
     *   [
     *     1499040000000,      // Open time
     *     "0.01634000",       // Open
     *     "0.80000000",       // High
     *     "0.01575800",       // Low
     *     "0.01577100",       // Close
     *     "148976.11427815",  // Volume
     *     1499644799999,      // Close time
     *     "2434.19055334",    // Quote asset volume
     *     308,                // Number of trades
     *     "1756.87402397",    // Taker buy base asset volume
     *     "28.46694368",      // Taker buy quote asset volume
     *     "17928899.62484339" // Ignore
     *   ]
     * ]
     */
    private parseKLines;
    private handleApiError;
}
//# sourceMappingURL=binance-service.d.ts.map