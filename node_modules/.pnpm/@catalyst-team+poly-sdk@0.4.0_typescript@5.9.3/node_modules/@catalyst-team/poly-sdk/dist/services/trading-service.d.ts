/**
 * TradingService
 *
 * Trading service using official @polymarket/clob-client.
 *
 * Provides:
 * - Order creation (limit, market)
 * - Order management (cancel, query)
 * - Rewards tracking
 * - Balance management
 *
 * Note: Market data methods have been moved to MarketService.
 */
import { ClobClient, type TickSize } from '@polymarket/clob-client';
import { Wallet } from 'ethers';
import { RateLimiter } from '../core/rate-limiter.js';
import type { UnifiedCache } from '../core/unified-cache.js';
import type { Side } from '../core/types.js';
export declare const POLYGON_MAINNET = 137;
export declare const POLYGON_AMOY = 80002;
/** Minimum order value in USDC (price * size >= MIN_ORDER_VALUE) */
export declare const MIN_ORDER_VALUE_USDC = 1;
/** Minimum order size in shares */
export declare const MIN_ORDER_SIZE_SHARES = 5;
export type { Side, OrderType } from '../core/types.js';
export interface ApiCredentials {
    key: string;
    secret: string;
    passphrase: string;
}
export interface TradingServiceConfig {
    /** Private key for signing */
    privateKey: string;
    /** Chain ID (default: Polygon mainnet 137) */
    chainId?: number;
    /** Pre-generated API credentials (optional) */
    credentials?: ApiCredentials;
}
export interface LimitOrderParams {
    tokenId: string;
    side: Side;
    price: number;
    size: number;
    orderType?: 'GTC' | 'GTD';
    expiration?: number;
}
export interface MarketOrderParams {
    tokenId: string;
    side: Side;
    amount: number;
    price?: number;
    orderType?: 'FOK' | 'FAK';
}
export interface Order {
    id: string;
    status: string;
    tokenId: string;
    side: Side;
    price: number;
    originalSize: number;
    filledSize: number;
    remainingSize: number;
    associateTrades: string[];
    createdAt: number;
}
export interface OrderResult {
    success: boolean;
    orderId?: string;
    orderIds?: string[];
    errorMsg?: string;
    transactionHashes?: string[];
}
export interface TradeInfo {
    id: string;
    tokenId: string;
    side: Side;
    price: number;
    size: number;
    fee: number;
    timestamp: number;
}
export interface UserEarning {
    date: string;
    conditionId: string;
    assetAddress: string;
    makerAddress: string;
    earnings: number;
    assetRate: number;
}
export interface MarketReward {
    conditionId: string;
    question: string;
    marketSlug: string;
    eventSlug: string;
    rewardsMaxSpread: number;
    rewardsMinSize: number;
    tokens: Array<{
        tokenId: string;
        outcome: string;
        price: number;
    }>;
    rewardsConfig: Array<{
        assetAddress: string;
        startDate: string;
        endDate: string;
        ratePerDay: number;
        totalRewards: number;
    }>;
}
export declare class TradingService {
    private rateLimiter;
    private cache;
    private config;
    private clobClient;
    private wallet;
    private chainId;
    private credentials;
    private initialized;
    private tickSizeCache;
    private negRiskCache;
    constructor(rateLimiter: RateLimiter, cache: UnifiedCache, config: TradingServiceConfig);
    initialize(): Promise<void>;
    /**
     * Try to derive existing API key first, create new one if not exists.
     * This is the reverse of official createOrDeriveApiKey() to avoid
     * 400 "Could not create api key" error log for existing keys.
     */
    private deriveOrCreateApiKey;
    private ensureInitialized;
    /**
     * Get tick size for a token
     */
    getTickSize(tokenId: string): Promise<TickSize>;
    /**
     * Check if token is neg risk
     */
    isNegRisk(tokenId: string): Promise<boolean>;
    /**
     * Create and post a limit order
     *
     * Note: Polymarket enforces minimum order requirements:
     * - Minimum size: 5 shares (MIN_ORDER_SIZE_SHARES)
     * - Minimum value: $1 USDC (MIN_ORDER_VALUE_USDC)
     *
     * Orders below these limits will be rejected by the API.
     */
    createLimitOrder(params: LimitOrderParams): Promise<OrderResult>;
    /**
     * Create and post a market order
     *
     * Note: Polymarket enforces minimum order requirements:
     * - Minimum value: $1 USDC (MIN_ORDER_VALUE_USDC)
     *
     * Market orders below this limit will be rejected by the API.
     */
    createMarketOrder(params: MarketOrderParams): Promise<OrderResult>;
    cancelOrder(orderId: string): Promise<OrderResult>;
    cancelOrders(orderIds: string[]): Promise<OrderResult>;
    cancelAllOrders(): Promise<OrderResult>;
    getOpenOrders(marketId?: string): Promise<Order[]>;
    getTrades(marketId?: string): Promise<TradeInfo[]>;
    isOrderScoring(orderId: string): Promise<boolean>;
    areOrdersScoring(orderIds: string[]): Promise<Record<string, boolean>>;
    getEarningsForDay(date: string): Promise<UserEarning[]>;
    getCurrentRewards(): Promise<MarketReward[]>;
    getBalanceAllowance(assetType: 'COLLATERAL' | 'CONDITIONAL', tokenId?: string): Promise<{
        balance: string;
        allowance: string;
    }>;
    updateBalanceAllowance(assetType: 'COLLATERAL' | 'CONDITIONAL', tokenId?: string): Promise<void>;
    getAddress(): string;
    getWallet(): Wallet;
    getCredentials(): ApiCredentials | null;
    isInitialized(): boolean;
    getClobClient(): ClobClient | null;
}
//# sourceMappingURL=trading-service.d.ts.map