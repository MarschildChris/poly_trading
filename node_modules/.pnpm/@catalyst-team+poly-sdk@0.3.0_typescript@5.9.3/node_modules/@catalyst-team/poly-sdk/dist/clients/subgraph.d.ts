/**
 * Polymarket Subgraph Client
 *
 * 官方文档: https://docs.polymarket.com/developers/subgraph/overview
 * Schema 仓库: https://github.com/Polymarket/polymarket-subgraph
 *
 * 5 个 Subgraph:
 * - Positions (0.0.7): 用户余额、Net 余额
 * - PnL (0.0.14): 用户持仓、PnL、Condition 结算状态
 * - Activity (0.0.4): Split/Merge/Redemption 事件
 * - OI (0.0.6): 市场/全局 Open Interest
 * - Orderbook (0.0.1): 订单成交事件
 */
import { RateLimiter } from '../core/rate-limiter.js';
import type { UnifiedCache } from '../core/unified-cache.js';
export declare const SUBGRAPH_ENDPOINTS: {
    readonly positions: "https://api.goldsky.com/api/public/project_cl6mb8i9h0003e201j6li0diw/subgraphs/positions-subgraph/0.0.7/gn";
    readonly pnl: "https://api.goldsky.com/api/public/project_cl6mb8i9h0003e201j6li0diw/subgraphs/pnl-subgraph/0.0.14/gn";
    readonly activity: "https://api.goldsky.com/api/public/project_cl6mb8i9h0003e201j6li0diw/subgraphs/activity-subgraph/0.0.4/gn";
    readonly oi: "https://api.goldsky.com/api/public/project_cl6mb8i9h0003e201j6li0diw/subgraphs/oi-subgraph/0.0.6/gn";
    readonly orderbook: "https://api.goldsky.com/api/public/project_cl6mb8i9h0003e201j6li0diw/subgraphs/orderbook-subgraph/0.0.1/gn";
};
export type SubgraphName = keyof typeof SUBGRAPH_ENDPOINTS;
export interface UserBalance {
    id: string;
    user: string;
    asset: string;
    balance: string;
}
export interface NetUserBalance {
    id: string;
    user: string;
    asset: string;
    balance: string;
}
export interface UserPosition {
    id: string;
    user: string;
    tokenId: string;
    amount: string;
    avgPrice: string;
    realizedPnl: string;
    totalBought: string;
}
export interface Condition {
    id: string;
    positionIds: string[];
    payoutNumerators: string[];
    payoutDenominator: string;
}
export interface Split {
    id: string;
    timestamp: string;
    stakeholder: string;
    condition: string;
    amount: string;
}
export interface Merge {
    id: string;
    timestamp: string;
    stakeholder: string;
    condition: string;
    amount: string;
}
export interface Redemption {
    id: string;
    timestamp: string;
    redeemer: string;
    condition: string;
    payout: string;
}
export interface MarketOpenInterest {
    id: string;
    amount: string;
}
export interface GlobalOpenInterest {
    id: string;
    amount: string;
}
export interface OrderFilledEvent {
    id: string;
    transactionHash: string;
    timestamp: string;
    orderHash: string;
    maker: string;
    taker: string;
    makerAssetId: string;
    takerAssetId: string;
    makerAmountFilled: string;
    takerAmountFilled: string;
    fee: string;
}
export interface MarketData {
    id: string;
    volume: string;
}
export interface SubgraphQueryParams {
    first?: number;
    skip?: number;
    orderBy?: string;
    orderDirection?: 'asc' | 'desc';
    where?: Record<string, unknown>;
}
export declare class SubgraphClient {
    private rateLimiter;
    private cache;
    constructor(rateLimiter: RateLimiter, cache: UnifiedCache);
    /**
     * 执行 GraphQL 查询
     */
    private query;
    /**
     * 构建查询字符串
     */
    private buildQuery;
    /**
     * 获取用户余额
     */
    getUserBalances(user: string, params?: SubgraphQueryParams): Promise<UserBalance[]>;
    /**
     * 获取 Net 用户余额
     */
    getNetUserBalances(user: string, params?: SubgraphQueryParams): Promise<NetUserBalance[]>;
    /**
     * 获取用户持仓 (含 PnL)
     */
    getUserPositions(user: string, params?: SubgraphQueryParams): Promise<UserPosition[]>;
    /**
     * 获取 Condition 结算状态
     */
    getConditions(params?: SubgraphQueryParams): Promise<Condition[]>;
    /**
     * 获取单个 Condition
     */
    getCondition(conditionId: string): Promise<Condition | null>;
    /**
     * 检查 Condition 是否已结算
     */
    isConditionResolved(conditionId: string): Promise<boolean>;
    /**
     * 获取用户的 Split 事件
     */
    getSplits(user: string, params?: SubgraphQueryParams): Promise<Split[]>;
    /**
     * 获取用户的 Merge 事件
     */
    getMerges(user: string, params?: SubgraphQueryParams): Promise<Merge[]>;
    /**
     * 获取用户的 Redemption 事件
     */
    getRedemptions(user: string, params?: SubgraphQueryParams): Promise<Redemption[]>;
    /**
     * 获取最近的 Redemption 事件 (不限用户)
     */
    getRecentRedemptions(params?: SubgraphQueryParams): Promise<Redemption[]>;
    /**
     * 获取市场 Open Interest
     */
    getMarketOpenInterest(conditionId: string): Promise<MarketOpenInterest | null>;
    /**
     * 获取 Top 市场按 OI 排序
     */
    getTopMarketsByOI(params?: SubgraphQueryParams): Promise<MarketOpenInterest[]>;
    /**
     * 获取全局 Open Interest
     */
    getGlobalOpenInterest(): Promise<string>;
    /**
     * 获取订单成交事件
     */
    getOrderFilledEvents(params?: SubgraphQueryParams): Promise<OrderFilledEvent[]>;
    /**
     * 获取用户作为 maker 的成交事件
     */
    getMakerFills(maker: string, params?: SubgraphQueryParams): Promise<OrderFilledEvent[]>;
    /**
     * 获取用户作为 taker 的成交事件
     */
    getTakerFills(taker: string, params?: SubgraphQueryParams): Promise<OrderFilledEvent[]>;
    /**
     * 获取市场数据
     */
    getMarketData(assetId: string): Promise<MarketData | null>;
    /**
     * 获取用户完整的链上活动摘要
     */
    getUserActivitySummary(user: string): Promise<{
        positions: UserPosition[];
        splits: Split[];
        merges: Merge[];
        redemptions: Redemption[];
        makerFills: OrderFilledEvent[];
        takerFills: OrderFilledEvent[];
    }>;
}
//# sourceMappingURL=subgraph.d.ts.map